!function(a,b){function c(a,c,e,f,g){v=b(a),v.css("position","relative").html('<div id="gform-field-filters"></div>'),D=g,B="undefined"!=typeof D&&D>0,w={is:"is",isnot:"isNot",">":"greaterThan","<":"lessThan",contains:"contains",starts_with:"startsWith",ends_with:"endsWith"},A=gf_vars.baseUrl+"/images",x=c,y=e&&e.filters?e.filters:[],z=e&&e.mode?e.mode:"all",C="undefined"==typeof f||f?!0:!1,d(y)}function d(a){var c;if(v.on("change",".gform-filter-field",function(){h(this)}),v.on("click","#gform-no-filters",function(a){0==b(".gform-field-filter").length&&t(this),b(this).remove()}),v.on("click",".gform-add",function(){t(this)}),v.on("click",".gform-remove",function(){u(this)}),v.on("change",".gform-filter-operator",function(){g(this,this.value)}),"undefined"==typeof a||0==a.length)return void o();for("off"!=z&&b("#gform-field-filters").append(q(z)),c=0;c<a.length;c++)b("#gform-field-filters").append(e());b(".gform-filter-field").each(function(b){var c=a[b].field;jQuery(this).val(c),h(this)}),b(".gform-filter-operator").each(function(b){var c=a[b].operator;jQuery(this).val(c),g(this,this.value)}),b(".gform-filter-value").each(function(b){var c=a[b].value;jQuery(this).val(c),jQuery(this).change()}),n()}function e(){var a;return a="<div class='gform-field-filter'>",a+=f()+j()+k()+m(),a+="</div>"}function f(){var a,b,c,d,e,f,g,h,j="",k=[];for(k.push("<select class='gform-filter-field' name='f[]' >"),a=0;a<x.length;a++)if(c=x[a].key,x[a].group){for(f=x[a].text,h=x[a].filters.length,g=[],b=0;h>b;b++)e=x[a].filters[b].text,d=x[a].filters[b].key,j=i(d)?'disabled="disabled"':"",g.push('<option {0} value="{1}">{2}</option>'.format(j,d,e));k.push('<optgroup label="{0}">{1}</optgroup>'.format(f,g.join("")))}else j=x[a].preventMultiple&&i(c)?"disabled='disabled'":"",e=x[a].text,k.push('<option {0} value="{1}">{2}</option>'.format(j,c,e));return k.push("</select>"),k.push("<input type='hidden' class='gform-filter-type' name='t[]' value='' >"),k.join("")}function g(a){var c=b(a),d=c.siblings(".gform-filter-field"),e=l(d.val());e&&c.siblings(".gform-filter-value").replaceWith(k(e,a.value)),p(),window.gformInitDatepicker&&gformInitDatepicker()}function h(a){var c=l(a.value);if(c){var d=b(a);d.siblings(".gform-filter-value").replaceWith(k(c)),d.siblings(".gform-filter-type").val(c.type),d.siblings(".gform-filter-operator").replaceWith(j(c)),d.siblings(".gform-filter-operator").change()}p()}function i(a){a=a.toString();var c=[];return b(".gform-filter-field :selected").each(function(a,d){c[a]=b(d).val()}),b.inArray(a,c)>-1?!0:!1}function j(a){var b,c,d="<select name='o[]' class='gform-filter-operator'>";if(a)for(b=0;b<a.operators.length;b++)c=a.operators[b],d+='<option value="{0}">{1}</option>'.format(c,gf_vars[w[c]]);return d+="</select>"}function k(a,c){var d,e,f,g,h,i,j="";if(i="gform-filter-value",a&&"undefined"!=typeof a.cssClass&&(i+=" "+a.cssClass),a&&a.values&&"contains"!=c){for("undefined"!=typeof a.placeholder&&(j+='<option value="">{0}</option>'.format(a.placeholder)),d=0;d<a.values.length;d++)e=a.values[d].value,f=a.values[d].text,a.values[d].operators&&-1===b.inArray(c,a.values[d].operators)||(j+='<option value="{0}">{1}</option>'.format(e,f));g="<select name='v[]' class='{0}'>{1}</select>".format(i,j)}else h=a&&"undefined"!=typeof a.placeholder?"placeholder='{0}'".format(a.placeholder):"",g="<input type='text' value='' name='v[]' class='{0}' {1}/>".format(i,h);return g}function l(a){if(a)for(var b=0;b<x.length;b++){if(a==x[b].key)return x[b];if(x[b].group)for(var c=0;c<x[b].filters.length;c++)if(a==x[b].filters[c].key)return x[b].filters[c]}}function m(){var a="";return C?(a+="<img class='gform-add' src='{0}/add.png' alt='{1}' title='{2}'>".format(A,gf_vars.addFieldFilter,gf_vars.addFieldFilter),a+="<img class='gform-remove' src='"+A+"/remove.png' alt='"+gf_vars.removeFieldFilter+"' title='"+gf_vars.removeFieldFilter+"'>"):a}function n(){if(B){var a=b("#gform-field-filters"),c=b(".gform-field-filter");if(c.length<=1)return void(b(v).hasClass("ui-resizable")&&v.resizable("destroy"));var d=a.get(0).scrollHeight>v.height()||v.height()>=D;d?(v.css({"min-height":D+"px","border-bottom":"5px double #DDD"}).resizable({handles:"s",minHeight:D}),a.css("min-height",D)):v.css({"min-height":"","border-bottom":""})}}function o(){var a="";a+="<div id='gform-no-filters' >"+gf_vars.addFieldFilter,a+="<img class='gform-add' src='{0}/add.png' alt='{1}' title='{2}'></div>".format(A,gf_vars.addFieldFilter,gf_vars.addFieldFilter),b("#gform-field-filters").html(a),B&&(v.css({"min-height":"","border-bottom":""}),v.height(80),b("#gform-field-filters").css("min-height",""))}function p(){b("select.gform-filter-field option").removeAttr("disabled"),b("select.gform-filter-field").each(function(a){var c=l(this.value);"undefined"!=typeof c&&c.preventMultiple&&i(this.value)&&b("select.gform-filter-field option[value='"+this.value+"']:not(:selected)").attr("disabled","disabled")})}function q(a){var b;return b='<select name="mode"><option value="all" {0}>{1}</option><option value="any" {2}>{3}</option></select>'.format(r("all",a),gf_vars.all,r("any",a),gf_vars.any),b=gf_vars.filterAndAny.format(b)}function r(a,b){return a==b?'selected="selected"':""}function s(a){a.after(q())}function t(a){var c,d;c=b(a),d=c.is("img")?c.parent():c,d.after(e()),d.next("div").find(".gform-filter-field").change().find(".gform-filter-operator").change(),1==b(".gform-field-filter").length&&s(d),n()}function u(a){b(a).parent().remove(),0==b(".gform-field-filter").length&&o(),p(),n()}b.fn.gfFilterUI=function(a,b,d,e){return c(this,a,b,d,e),this};var v,w,x,y,z,A,B,C,D;String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})}}(window.gfFilterUI=window.gfFilterUI||{},jQuery);